days <- unique(d.aux$acq_date)
days
d.aux <- d.aux[complete.cases(d.aux),]
days <- unique(d.aux$acq_date)
days
days <- as.character(unique(d.aux$acq_date))
i<-1
for(i in 1:length(days)) {
day <- days[i]
}
day <- days[i]
d.aux[d.aux$acq_date==day,]
days <- as.character(unique(d.aux$acq_date))
days <- as.character(unique(d.aux$acq_date))
days
i
i<-1
day <- days[i]
d.aux[d.aux$acq_date==day,]
auxil <- d.aux[d.aux$acq_date==day,]
hours <- unique(auxil$acq_time)
hours
typeof(hours[1])
auxil.time <- auxil[auxil$acq_time==time,]
time <- hours[t]
hours <- unique(auxil$acq_time)
hours
t<-1
time <- hours[t]
time
auxil[auxil$acq_time==time,]
auxil.time <- auxil[auxil$acq_time==time,]
lst <- list()
length(lst)
length(lst)+1
auxil.time <- auxil[auxil$acq_time==time,]
auxil.time
ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=frp), data = auxil.time, alpha = .5) + scale_colour_gradient(low="blue",high="red")
ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=frp), data = auxil.time, alpha = .5) + scale_colour_gradient(low="blue",high="red",limits=c(min(d$frp),max(d$frp)))
days <- as.character(unique(d.aux$acq_date))
day <- days[i]
auxil <- d.aux[d.aux$acq_date==day,]
hours <- unique(auxil$acq_time)
time <- hours[t]
auxil.time <- auxil[auxil$acq_time==time,]
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=frp), data = auxil.time, alpha = .5) + scale_colour_gradient(low="blue",high="red",limits=c(min(d$frp),max(d$frp)))
lst[[length(lst)+1]] <- mapPoints
lst
lst[[length(lst)+1]] <- mapPoints
ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=frp), data = auxil.time, alpha = .5) + scale_colour_gradient(low="blue",high="red",limits=c(min(d$frp),max(d$frp))) + ggtitle(paste0(day," - ",time))
lst
lst <- list()
days <- as.character(unique(d.aux$acq_date))
for(i in 1:length(days)) {
day <- days[i]
auxil <- d.aux[d.aux$acq_date==day,]
hours <- unique(auxil$acq_time)
for(t in 1:length(hours)) {
time <- hours[t]
auxil.time <- auxil[auxil$acq_time==time,]
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=frp), data = auxil.time, alpha = .5) + scale_colour_gradient(low="blue",high="red",limits=c(min(d$frp),max(d$frp))) + ggtitle(paste0(day," - ",time))
lst[[length(lst)+1]] <- mapPoints
}
}
length(lst)
lst[[1]]
lst[[2]]
lst[[3]]
lst[[4]]
lst[[5]]
lst[[6]]
lst[[7]]
lst[[8]]
lst[[9]]
lst[[10]]
lst[[11]]
lst[[12]]
lst[[13]]
lst[[14]]
lst[[15]]
lst[[16]]
head(d)
d.aux
d.aux["Date"] <- paste0(d.aux$acq_date," ",d.aux$acq_time)
head(d.aux)
head(d.aux,40)
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date)), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date),size=1), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date),size=1,shape="."), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date)), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), shape="."), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
map <- get_map(location="portugal",zoom=7)
map <- get_map(location="portugal",zoom=7)
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5)# + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5) + scale_colour_gradient(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5) + scale_colour_discrete(low="blue",high="red")
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5) #+ scale_colour_discrete(low="blue",high="red")
mapPoints
map <- get_map(location="portugal",zoom=8)
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(Date), stroke=0), data = d.aux, alpha = .5) #+ scale_colour_discrete(low="blue",high="red")
mapPoints
head(d)
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(acq_date), stroke=0), data = d.aux, alpha = .5) #+ scale_colour_discrete(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=acq_date, stroke=0), data = d.aux, alpha = .5) #+ scale_colour_discrete(low="blue",high="red")
mapPoints
mapPoints <- ggmap(map) + geom_point(aes(x = longitude, y = latitude, colour=factor(acq_date), stroke=0), data = d.aux, alpha = .5) #+ scale_colour_discrete(low="blue",high="red")
mapPoints
A=matrix(c(.8,.2),2,1)
B=matrix(c(.6,.4,.3,.7),2,2)
C=matrix(c(.5,.5,.8,.8),2,2)
D=matrix(c(.3,.7,.4,.6),2,2)
A
Bs = t(A) %*% t(B)
A
B
Bs
0.8
0.8*0.6
0.8*0.3
0.8*0.2
0.48+0.16
?>*>
>*>
?%*%
%*%
1 %*% 1
1 %*% 0.9
1 %*% c(0.9,0.8)
c(0.8,0.9) %*% c(0.9,0.8)
0.9*0.9
0.9*0.8
0.9*0.8
0.72+0.72
0.8*0.6 + 0.8*0.3
0.8*0.6 + 0.2*0.4
install.packages("sf")
library(sf)
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
head(ocs)
ncol(ocs)
ncols <- ncol(ocs)
?gsub
i<-1
colm <- ocs[,i]
colmn <- gsub("á", "a", colmn)
colm <- ocs[,i]
colmn <- gsub("á", "a", colm)
colmn <- gsub("à", "a", colm)
colmn <- gsub("ã", "a", colm)
colmn <- gsub("é", "e", colm)
colmn <- gsub("è", "e", colm)
colmn <- gsub("í", "i", colm)
colmn <- gsub("ì", "i", colm)
colmn <- gsub("ó", "o", colm)
colmn <- gsub("ò", "o", colm)
colmn <- gsub("õ", "o", colm)
colmn <- gsub("ú", "u", colm)
colmn <- gsub("ù", "u", colm)
colmn <- gsub("ç", "c", colm)
head(colmn,20)
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("ç", "c", colm)
head(colm,20)
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
#each column
ncols <- ncol(ocs)
for(i in 1:ncols) {
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("ç", "c", colm)
}
cnames <- colnames(ocs)
cnames <- ocs[,i]
cnames <- gsub("á", "a", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("ç", "c", cnames)
colnames(ocs) <- cnames
cnames <- colnames(ocs)
cnames
cnames <- gsub("á", "a", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("ç", "c", cnames)
cnames
colnames(ocs) <- cnames
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv")
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE)
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE,na = "")
head(ocs[,1],30)
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
#each column
ncols <- ncol(ocs)
for(i in 1:ncols) {
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("ç", "c", colm)
ocs[,i] <- colm
}
#names of columns
cnames <- colnames(ocs)
cnames <- gsub("á", "a", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("ç", "c", cnames)
colnames(ocs) <- cnames
head(ocs[,1],30)
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE,na = "")
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
#each column
ncols <- ncol(ocs)
for(i in 1:ncols) {
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("ç", "c", colm)
ocs[,i] <- colm
}
#names of columns
cnames <- colnames(ocs)
cnames <- gsub("á", "a", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("â", "a", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("ê", "e", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("î", "i", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("ô", "o", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("û", "u", cnames)
cnames <- gsub("ç", "c", cnames)
colnames(ocs) <- cnames
head(ocs[,1],30)
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE,na = "")
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
#each column
ncols <- ncol(ocs)
for(i in 1:ncols) {
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("ç", "c", colm)
ocs[,i] <- colm
}
#names of columns
cnames <- colnames(ocs)
cnames <- gsub("á", "a", cnames)
cnames <- gsub("Á", "A", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("À", "A", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("Ã", "A", cnames)
cnames <- gsub("â", "a", cnames)
cnames <- gsub("Â", "A", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("É", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("È", "E", cnames)
cnames <- gsub("ê", "e", cnames)
cnames <- gsub("Ê", "E", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("Í", "I", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("Ì", "I", cnames)
cnames <- gsub("î", "i", cnames)
cnames <- gsub("Î", "I", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("Ó", "O", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("Ò", "O", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("Õ", "O", cnames)
cnames <- gsub("ô", "o", cnames)
cnames <- gsub("Ô", "O", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("Ú", "U", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("Ù", "U", cnames)
cnames <- gsub("û", "u", cnames)
cnames <- gsub("Û", "U", cnames)
cnames <- gsub("ç", "c", cnames)
cnames <- gsub("Ç", "C", cnames)
colnames(ocs) <- cnames
head(ocs[,1],30)
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE,na = "")
ocs <- read.csv("~/Desktop/Report_new_NunoMoniz.csv")
#each column
ncols <- ncol(ocs)
for(i in 1:ncols) {
colm <- ocs[,i]
colm <- gsub("á", "a", colm)
colm <- gsub("Á", "A", colm)
colm <- gsub("à", "a", colm)
colm <- gsub("À", "A", colm)
colm <- gsub("ã", "a", colm)
colm <- gsub("Ã", "A", colm)
colm <- gsub("â", "a", colm)
colm <- gsub("Â", "A", colm)
colm <- gsub("é", "e", colm)
colm <- gsub("É", "e", colm)
colm <- gsub("è", "e", colm)
colm <- gsub("È", "E", colm)
colm <- gsub("ê", "e", colm)
colm <- gsub("Ê", "E", colm)
colm <- gsub("í", "i", colm)
colm <- gsub("Í", "I", colm)
colm <- gsub("ì", "i", colm)
colm <- gsub("Ì", "I", colm)
colm <- gsub("î", "i", colm)
colm <- gsub("Î", "I", colm)
colm <- gsub("ó", "o", colm)
colm <- gsub("Ó", "O", colm)
colm <- gsub("ò", "o", colm)
colm <- gsub("Ò", "O", colm)
colm <- gsub("õ", "o", colm)
colm <- gsub("Õ", "O", colm)
colm <- gsub("ô", "o", colm)
colm <- gsub("Ô", "O", colm)
colm <- gsub("ú", "u", colm)
colm <- gsub("Ú", "U", colm)
colm <- gsub("ù", "u", colm)
colm <- gsub("Ù", "U", colm)
colm <- gsub("û", "u", colm)
colm <- gsub("Û", "U", colm)
colm <- gsub("ç", "c", colm)
colm <- gsub("Ç", "C", colm)
ocs[,i] <- colm
}
#names of columns
cnames <- colnames(ocs)
cnames <- gsub("á", "a", cnames)
cnames <- gsub("Á", "A", cnames)
cnames <- gsub("à", "a", cnames)
cnames <- gsub("À", "A", cnames)
cnames <- gsub("ã", "a", cnames)
cnames <- gsub("Ã", "A", cnames)
cnames <- gsub("â", "a", cnames)
cnames <- gsub("Â", "A", cnames)
cnames <- gsub("é", "e", cnames)
cnames <- gsub("É", "e", cnames)
cnames <- gsub("è", "e", cnames)
cnames <- gsub("È", "E", cnames)
cnames <- gsub("ê", "e", cnames)
cnames <- gsub("Ê", "E", cnames)
cnames <- gsub("í", "i", cnames)
cnames <- gsub("Í", "I", cnames)
cnames <- gsub("ì", "i", cnames)
cnames <- gsub("Ì", "I", cnames)
cnames <- gsub("î", "i", cnames)
cnames <- gsub("Î", "I", cnames)
cnames <- gsub("ó", "o", cnames)
cnames <- gsub("Ó", "O", cnames)
cnames <- gsub("ò", "o", cnames)
cnames <- gsub("Ò", "O", cnames)
cnames <- gsub("õ", "o", cnames)
cnames <- gsub("Õ", "O", cnames)
cnames <- gsub("ô", "o", cnames)
cnames <- gsub("Ô", "O", cnames)
cnames <- gsub("ú", "u", cnames)
cnames <- gsub("Ú", "U", cnames)
cnames <- gsub("ù", "u", cnames)
cnames <- gsub("Ù", "U", cnames)
cnames <- gsub("û", "u", cnames)
cnames <- gsub("Û", "U", cnames)
cnames <- gsub("ç", "c", cnames)
cnames <- gsub("Ç", "C", cnames)
colnames(ocs) <- cnames
head(ocs[,1],30)
write.csv(ocs, file="~/Desktop/Report_new_NunoMoniz_edited.csv",row.names=FALSE,na = "")
setwd("~/Desktop/Academia/Manuscripts/2017 - News Dataset (MDPI)/MultiSourceNews/Data/")
news <- read.csv("News_Final.csv") # DATA ON NEWS ITEMS
head(news)
facebook_economy <- read.csv("Facebook_Economy.csv")
facebook_microsoft <- read.csv("Facebook_Microsoft.csv")
facebook_obama <- read.csv("Facebook_Obama.csv")
facebook_palestine <- read.csv("Facebook_Palestine.csv")
head(facebook_economy)
library(tm)
library(qdap)
news.economy <- news[news$Topic == "economy",]
news.economy <- news.economy[order(as.POSIXlt(news.economy$PublishDate, "%Y-%m-%d %H:%M:%S"), decreasing = FALSE),]
rownames(news.economy) <- 1:nrow(news.economy)
#ECONOMY#
corpus <- Corpus(VectorSource(news.economy$Headline))
corpus <- tm_map(corpus, content_transformer(tolower))
removeHandles <- function(x) gsub("@[[:alnum:]]*", "", x)
corpus <- tm_map(corpus, content_transformer(removeHandles))
removeURL <- function(x) gsub("http[[:graph:]]+", "", x)
corpus <- tm_map(corpus, content_transformer(removeURL))
removeStrange <- function(x) gsub("(<.+>)+", "", x)
corpus <- tm_map(corpus, content_transformer(removeStrange))
myStopwords <- c(stopwords('english'),"economy","next","break","else","terms","while")
corpus <- tm_map(corpus, content_transformer(removeWords), myStopwords)
corpus <- tm_map(corpus, content_transformer(removePunctuation))
corpus <- tm_map(corpus, content_transformer(removeNumbers))
corpus <- tm_map(corpus, content_transformer(stripWhitespace))
DTM_train <- DocumentTermMatrix(corpus, control=list(wordLengths=c(4,Inf)))
DTM_train <- removeSparseTerms(DTM_train,0.99)
rowTotals <- apply(DTM_train, 1, sum)
matrix_train <- as.matrix(DTM_train)
frame_train <- as.data.frame(matrix_train)
frame_train <- frame_train[rowTotals>0,]
frame_train["IDLink"] <- NA
frame_train$IDLink <- as.numeric(news.economy[rownames(frame_train),]$IDLink)
frame_train["PublishDate"] <- NA
frame_train$PublishDate <- as.POSIXct(news.economy[rownames(frame_train),]$PublishDate)
frame_train["SentimentTitle"] <- NA
frame_train$SentimentTitle <- as.numeric(news.economy[rownames(frame_train),]$SentimentTitle)
frame_train["SentimentHeadline"] <- NA
frame_train$SentimentHeadline <- as.numeric(news.economy[rownames(frame_train),]$SentimentHeadline)
frame_train.headline.economy <- frame_train
head(frame_train.headline.economy)
news <- read.csv("News_Final.csv") # DATA ON NEWS ITEMS
nrow(news)
